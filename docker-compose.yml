services:
  app-backend:
    image: stocknear/app-backend
    build: ./app
    ports:
      - 8000:8000
    depends_on:
      - redis

  fastify-backend:
    image: stocknear/fastify-backend
    build: ./fastify
    ports:
      - 2000:2000
    environment:
      - FMP_API_KEY=""
      - MIXPANEL_API_KEY=""
      - TWITCH_API_KEY=""
      - TWITCH_SECRET_KEY=""
    depends_on:
      - pocketbase

  redis:
    image: redis:6.2-alpine
    ports:
      - '6379:6379'

  pocketbase:
    image: ghcr.io/muchobien/pocketbase:latest
    ports:
      - "8090:8090"
    volumes:
      - ./pocketbase_data:/pb_data